(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/settled/index"],{"3a0a":function(t,e,i){},5316:function(t,e,i){"use strict";(function(t){i("ebf5");n(i("66fd"));var e=n(i("cb37"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},c2ee:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("a34a")),a=(i("f9f5"),i("b2cd")),o=i("b79f"),s=i("26cb"),r=c(i("5411"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,i,n,a,o,s){try{var r=t[o](s),c=r.value}catch(u){return void i(u)}r.done?e(c):Promise.resolve(c).then(n,a)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var o=t.apply(e,i);function s(t){u(o,n,a,s,r,"next",t)}function r(t){u(o,n,a,s,r,"throw",t)}s(void 0)}))}}var d=function(){Promise.all([i.e("common/vendor"),i.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(i("3e8d"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/Authorize").then(function(){return resolve(i("97f9"))}.bind(null,i)).catch(i.oe)},h=getApp(),m={components:{"jyf-parser":d,authorize:f},mixins:[r.default],data:function(){return{inloading:!0,status:-1,isAuto:!1,isShowAuth:!1,text:"获取验证码",codeUrl:"",disabled:!1,isAgree:!1,showProtocol:!1,isShowCode:!1,loading:!1,merchantData:{agent_name:"",name:"",phone:"",classification:"",division_invite:""},validate:!1,successful:!1,keyCode:"",codeVal:"",protocol:h.globalData.sys_intention_agree,timer:"",index:0,index1:0,mer_classification:"",mer_storeType:"",images:[],tagStyle:{img:"width:100%;display:block;"},mer_i_id:null,isType:!1,id:0,refusal_reason:""}},beforeDestroy:function(){clearTimeout(this.timer)},computed:(0,s.mapGetters)(["isLogin"]),onLoad:function(e){this.isLogin?this.$nextTick((function(){this.getGoodsDetails()})):(this.isAuto=!0,this.$set(this,"isShowAuth",!0)),e.id&&(this.id=id,t.showLoading({title:"获取数据中"}))},onShow:function(){},methods:{getAgentAgreement:function(){var t=this;(0,a.getAgentAgreement)().then((function(e){t.isType=!1,t.showProtocol=!0,t.protocol=e.data.content}))},getCode:function(){var t=this,e=this;(0,a.getCodeApi)().then((function(i){e.keyCode=i.data.key,t.code()})).catch((function(t){e.$util.Tips({title:t})}))},getGoodsDetails:function(){var e=this;(0,a.getGoodsDetails)().then((function(i){e.status=i.data.status;var n=i.data;if(-1!==i.data.status){var a=Object.keys(e.merchantData);a.map((function(t){e.merchantData[t]=n[t]})),t.hideLoading()}2===e.status&&(e.refusal_reason=n.refusal_reason),e.inloading=!1}))},getCategoryName:function(t,e){for(var i=0;i<e.length;i++)if(e[i].merchant_category_id===t)return e[i]["category_name"]},getPhotoClickIdx:function(t){var e=this,i=t.currentTarget.dataset.index;e.imgPreview(e.images,i)},imgPreview:function(e,i){e&&e.length>0&&t.previewImage({current:e[i],urls:e})},onLoadFun:function(){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},toggleTab:function(t){this.$refs[t].show()},goHome:function(){t.switchTab({url:"/pages/index/index"})},applyAgain:function(){this.status=-1},uploadpic:function(){var t=this,e=this;e.$util.uploadImageOne("upload/image",(function(i){t.images.push(i.data.url),e.$set(e,"images",e.images)}))},DelPic:function(t){var e=this;this.images[t];e.images.splice(t,1),e.$set(e,"images",e.images)},code:function(){var t=this;return l(n.default.mark((function e(){var i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,i.merchantData.phone){e.next=3;break}return e.abrupt("return",i.$util.Tips({title:"请填写手机号码"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(i.merchantData.phone)){e.next=5;break}return e.abrupt("return",i.$util.Tips({title:"请输入正确的手机号码"}));case 5:return e.next=7,(0,a.registerVerify)({phone:i.merchantData.phone,key:i.keyCode}).then((function(t){i.$util.Tips({title:t.msg}),i.sendCode()})).catch((function(t){return i.$util.Tips({title:t})}));case 7:case"end":return e.stop()}}),e)})))()},getcaptcha:function(){var t=this;(0,o.getCaptcha)().then((function(e){t.codeUrl=e.data.captcha,t.codeVal=e.data.code,t.codeKey=e.data.key})),t.isShowCode=!0},sendCode:function(){var t=this;if(!this.disabled){this.disabled=!0;var e=60;this.text="剩余 "+e+"s";var i=setInterval((function(){e-=1,e<0&&clearInterval(i),t.text="剩余 "+e+"s",t.text<"剩余 0s"&&(t.disabled=!1,t.text="重新获取")}),1e3)}},onConfirm:function(t){this.region=t.checkArr[0]+"-"+t.checkArr[1]+"-"+t.checkArr[2]},ChangeIsAgree:function(t){this.isAgree=!this.isAgree,this.validateBtn()},formSubmit:function(t){var e=this,i=this;if(i.validateForm()&&i.validate){var n={uid:this.$store.state.app.uid,phone:i.merchantData.phone,agent_name:i.merchantData.agent_name,name:i.merchantData.name,code:i.merchantData.code,division_invite:i.merchantData.division_invite,images:i.images,id:this.id};(0,a.create)(n).then((function(t){200==t.status&&(e.timer=setTimeout((function(){i.getGoodsDetails()}),1e3))})).catch((function(t){i.$util.Tips({title:t})}))}},validateBtn:function(){var t=this,e=t.merchantData;e.agent_name&&e.name&&e.phone&&/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)&&e.code&&t.isAgree&&e.classification&&(t.isShowCode?t.codeVal?t.validate=!0:t.validate=!1:t.validate=!0)},validateForm:function(){var t=this,e=t.merchantData;return e.agent_name?e.name?e.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)?e.code?t.isShowCode&&!t.codeVal?t.$util.Tips({title:"请填写图片验证码"}):t.images.length?t.isAgree?(t.validate=!0,!0):t.$util.Tips({title:"请勾选并同意入驻协议"}):t.$util.Tips({title:"请上传营业执照"}):t.$util.Tips({title:"请填写验证码"}):t.$util.Tips({title:"请输入正确的手机号码"}):t.$util.Tips({title:"请输入手机号"}):t.$util.Tips({title:"请输入姓名"}):t.$util.Tips({title:"请输入代理商名称"})},jumpToList:function(){t.navigateTo({url:"/pages/store/applicationRecord/index"})}}};e.default=m}).call(this,i("543d")["default"])},cb37:function(t,e,i){"use strict";i.r(e);var n=i("f4a1"),a=i("f80e");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("f7ae");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"4c5f612d",null,!1,n["a"],s);e["default"]=c.exports},f4a1:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={jyfParser:function(){return Promise.all([i.e("common/vendor"),i.e("components/jyf-parser/jyf-parser")]).then(i.bind(null,"3e8d"))}},a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showProtocol=!1})},o=[]},f7ae:function(t,e,i){"use strict";var n=i("3a0a"),a=i.n(n);a.a},f80e:function(t,e,i){"use strict";i.r(e);var n=i("c2ee"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}},[["5316","common/runtime","common/vendor"]]]);