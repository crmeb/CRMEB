(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/goods_bargain_details/index","components/zb-code/zb-code"],{"00a0ce":function(t,i,e){"use strict";e.r(i);var n=e("0c7d"),a=e("102f");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("85cd");var o=e("f0c5"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=r.exports},"017b":function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("2eee")),s=n(e("c973")),o=e("84d8"),r=e("d1ea"),u=n(e("19b6")),c={components:{zbCode:function(){Promise.all([e.e("common/vendor"),e.e("components/zb-code/zb-code")]).then(function(){return resolve(e("92ed"))}.bind(null,e)).catch(e.oe)}},mixins:[u.default],props:{comType:{type:String,default:"0"},comId:{type:String,default:"0"},comBargain:{type:String,default:"0"}},data:function(){return{canvasStatus:!0,posterImage:"",parameter:{navbar:"1",return:"1",title:this.$t("拼团海报"),color:!0,class:"0"},type:0,id:0,bargain:0,image:"",from:"",uid:"",codeShow:!1,cid:"1",ifShow:!0,val:"",size:200,unit:"upx",background:"#FFF",foreground:"#000",pdground:"#000",icon:"",iconsize:40,lv:3,onval:!0,loadMake:!0,src:"",codeSrc:"",wd:0,hg:0,posterBag:"../static/posterBag.png",mpUrl:""}},onLoad:function(i){if(1!=this.comType){this.from="routine";if(!i.hasOwnProperty("type")||!i.hasOwnProperty("id"))return app.Tips({title:this.$t("参数错误"),icon:"none"},{tab:3,url:1});this.type=i.type,this.id=i.id,1==i.type?(this.bargain=i.bargain,t.setNavigationBarTitle({title:this.$t("砍价海报")})):t.setNavigationBarTitle({title:this.$t("拼团海报")})}},mounted:function(){var i=this;if(1==this.comType){this.from="routine";t.setNavigationBarTitle({title:this.$t("砍价海报")}),this.type=this.comType,this.id=this.comId,this.bargain=this.comBargain,this.$nextTick((function(){t.createSelectorQuery().in(i).select(".pictrue").boundingClientRect((function(t){i.wd=t.width,i.hg=t.height})).exec()})),this.routineCode(),setTimeout((function(t){i.getPosterInfo()}),200)}},onReady:function(){1!=this.comType&&(setTimeout((function(t){}),200),this.$nextTick((function(){var i=this,e=t.createSelectorQuery().select(".pictrue");e.fields({size:!0},(function(t){i.wd=t.width,i.hg=t.height,i.getPosterInfo()})).exec()})),this.routineCode())},methods:{getPosterInfo:function(){var i=this;return(0,s.default)(a.default.mark((function e(){var n,s,u,c,l;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i,"",{id:n.id,from:n.from},e.next=4,(0,r.getUserInfo)();case 4:if(s=e.sent,i.uid=s.data.uid,t.showLoading({title:n.$t("海报生成中"),mask:!0}),1!=n.type){e.next=12;break}return e.next=10,(0,o.getBargainPosterData)(n.id).then((function(t){u=t.data})).catch((function(t){n.$util.Tips({title:n.$t("海报图片获取失败")})}));case 10:e.next=14;break;case 12:return e.next=14,(0,o.getCombinationPosterData)(n.id).then((function(t){u=t.data})).catch((function(t){n.$util.Tips({title:n.$t("海报图片获取失败")})}));case 14:if(u.image=n.setDomain(u.image),!u.url){e.next=21;break}return e.next=18,i.downloadFilestoreImage(u.url);case 18:e.t0=e.sent,e.next=24;break;case 21:return e.next=23,i.downloadFilestoreImage(i.mpUrl);case 23:e.t0=e.sent;case 24:return l=e.t0,e.t1=i.posterBag,e.next=28,i.downloadFilestoreImage(u.image);case 28:e.t2=e.sent,e.t3=l,c=[e.t1,e.t2,e.t3],i.$nextTick((function(t){n.$util.bargainPosterCanvas(c,u.title,u.label,u.msg,u.price,i.wd,i.hg,(function(t){i.posterImage=t,i.$emit("getPosterImgae",t)}))}));case 32:case"end":return e.stop()}}),e)})))()},routineCode:function(){var t=this;return(0,s.default)(a.default.mark((function i(){var e;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(0,r.routineCode)();case 2:e=i.sent,t.mpUrl=e.data.url;case 4:case"end":return i.stop()}}),i)})))()},downloadFilestoreImage:function(i){var e=this;return new Promise((function(n,a){var s=e;t.downloadFile({url:i,success:function(t){n(t.tempFilePath)},fail:function(){return s.$util.Tips({title:""})}})}))},setDomain:function(t){return t=t?t.toString():"",t.indexOf("https://")>-1?t:t.replace("http://","https://")},imgToBase:function(t,i){return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.imgToBase)({image:t,code:i});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))()},downloadImg:function(){},savePosterPathMp:function(i){var e=this;t.getSetting({success:function(n){n.authSetting["scope.writePhotosAlbum"]?t.saveImageToPhotosAlbum({filePath:i,success:function(t){e.$util.Tips({title:e.$t("保存成功"),icon:"success"})},fail:function(t){e.$util.Tips({title:e.$t("保存失败")})}}):t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:i,success:function(t){e.$util.Tips({title:e.$t("保存成功"),icon:"success"})},fail:function(t){e.$util.Tips({title:e.$t("保存失败")})}})},fail:function(t){e.$util.Tips({title:e.$t("保存失败")})}})}})},qrR:function(t){this.codeSrc=t},savePosterPath:function(){var i=this;t.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?t.saveImageToPhotosAlbum({filePath:i.posterImage,success:function(t){i.posterImageClose(),i.$util.Tips({title:i.$t("保存成功"),icon:"success"})},fail:function(t){i.$util.Tips({title:i.$t("保存失败")})}}):t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:i.posterImage,success:function(t){i.posterImageClose(),i.$util.Tips({title:i.$t("保存成功"),icon:"success"})},fail:function(t){i.$util.Tips({title:i.$t("保存失败")})}})}})}})}}};i.default=c}).call(this,e("543d")["default"])},"0ae7":function(t,i,e){"use strict";(function(t,i){var n=e("4ea4");e("4789");n(e("66fd"));var a=n(e("00a0ce"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(a.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"0c7d":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var n={jyfParser:function(){return Promise.all([e.e("common/vendor"),e.e("components/jyf-parser/jyf-parser")]).then(e.bind(null,"47fd"))}},a=function(){var t=this,i=t.$createElement,e=(t._self._c,t.$t("人查看")),n=t.$t("人分享"),a=t.$t("人参与"),s=t.bargainUid==t.userInfo.uid?t.$t("倒计时"):null,o=t.bargainUid==t.userInfo.uid?t.$t("天"):null,r=t.bargainUid==t.userInfo.uid?t.$t("时"):null,u=t.bargainUid==t.userInfo.uid?t.$t("分"):null,c=t.bargainUid==t.userInfo.uid?t.$t("秒"):null,l=t.bargainUid!=t.userInfo.uid?t.$t("邀请您帮忙砍价"):null,d=t.bargainInfo.product_is_show?t.$t("查看商品"):null,g=t.$t("当前"),f=t.$t("￥"),p=t.$t("最低"),h=t.$t("￥"),m=t.userBargainInfo.price>0?t.$t("已砍"):null,b=t.userBargainInfo.price>0?t.$t("还剩"):null,v=1==t.userBargainInfo.bargainType&&t.productStock>0&&t.quota>0?t.$t("立即参与砍价"):null,_=1==t.userBargainInfo.bargainType&&(t.productStock<=0||t.quota<=0)?t.$t("商品暂无库存"):null,$=2==t.userBargainInfo.bargainType?t.$t("邀请好友帮砍价"):null,I=2==t.userBargainInfo.bargainType?t.$t("已有"):null,y=2==t.userBargainInfo.bargainType?t.$t("位好友成功砍价"):null,T=3==t.userBargainInfo.bargainType?t.$t("帮好友砍一刀"):null,B=4==t.userBargainInfo.bargainType?t.$t("好友已砍价成功"):null,U=4==t.userBargainInfo.bargainType?t.$t("我也要参与"):null,S=5==t.userBargainInfo.bargainType?t.$t("已成功帮助好友砍价"):null,w=5==t.userBargainInfo.bargainType?t.$t("我也要参与"):null,P=6==t.userBargainInfo.bargainType?t.$t("恭喜您砍价成功，快去支付"):null,x=6==t.userBargainInfo.bargainType?t.$t("立即支付"):null,k=6==t.userBargainInfo.bargainType?t.$t("抢更多商品"):null,C=t.$t("砍价帮"),j=t.__map(t.bargainUserHelpList,(function(i,e){var n=t.__get_orig(i),a=e<3||!t.couponsHidden?t.$t("砍掉"):null,s=e<3||!t.couponsHidden?t.$t("￥"):null;return{$orig:n,m30:a,m31:s}})),H=t.bargainUserHelpList.length,L=H>3&&t.couponsHidden?t.$t("更多"):null,z=H>3&&!t.couponsHidden?t.$t("关闭"):null,A=t.limitStatus?null:t.$t("点击加载更多"),M=t.$t("商品详情"),D=t.$t("砍价规则"),O=t.bargainUid==t.userInfo.uid?t.$t("您已砍掉"):null,N=t.bargainUid==t.userInfo.uid?t.$t("元，听说分享次数越多砍价成功的机会越大哦"):null,F=t.bargainUid==t.userInfo.uid?t.$t("邀请好友帮砍价"):null,q=t.bargainUid!=t.userInfo.uid?t.$t("成功帮砍"):null,R=t.bargainUid!=t.userInfo.uid?t.$t("￥"):null,E=t.bargainUid!=t.userInfo.uid?t.$t("您也可以砍价低价拿哦，快去挑选心仪的商品吧"):null,J=t.bargainUid!=t.userInfo.uid?t.$t("我也要参与"):null,Q=t.posterImageModal?t.$t("保存到手机"):null,G=t.$t("发送给朋友"),K=t.$t("生成海报");t._isMounted||(t.e0=function(i){t.H5ShareBox=!1}),t.$mp.data=Object.assign({},{$root:{m0:e,m1:n,m2:a,m3:s,m4:o,m5:r,m6:u,m7:c,m8:l,m9:d,m10:g,m11:f,m12:p,m13:h,m14:m,m15:b,m16:v,m17:_,m18:$,m19:I,m20:y,m21:T,m22:B,m23:U,m24:S,m25:w,m26:P,m27:x,m28:k,m29:C,l0:j,g0:H,m32:L,m33:z,m34:A,m35:M,m36:D,m37:O,m38:N,m39:F,m40:q,m41:R,m42:E,m43:J,m44:Q,m45:G,m46:K}})},s=[]},"102f":function(t,i,e){"use strict";e.r(i);var n=e("f09e"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},"1ffc":function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,s=n(e("7037")),o=n(e("984e")),r={name:"zb-code",props:{cid:{type:String,default:"zb-code-canvas"},size:{type:Number,default:200},unit:{type:String,default:"upx"},show:{type:Boolean,default:!0},val:{type:String,default:""},background:{type:String,default:"#ffffff"},foreground:{type:String,default:"#000000"},pdground:{type:String,default:"#000000"},icon:{type:String,default:""},iconSize:{type:Number,default:40},lv:{type:Number,default:3},onval:{type:Boolean,default:!1},loadMake:{type:Boolean,default:!1},usingComponents:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!1},loadingText:{type:String,default:"二维码生成中"}},data:function(){return{result:""}},methods:{_makeCode:function(){var i=this;this._empty(this.val)?t.showToast({title:"二维码内容不能为空",icon:"none",duration:2e3}):a=new o.default({context:i,canvasId:i.cid,usingComponents:i.usingComponents,showLoading:i.showLoading,loadingText:i.loadingText,text:i.val,size:i.cpSize,background:i.background,foreground:i.foreground,pdground:i.pdground,correctLevel:i.lv,image:i.icon,imageSize:i.iconSize,cbResult:function(t){i._result(t)}})},_clearCode:function(){this._result(""),a.clear()},_saveCode:function(){""!=this.result&&t.saveImageToPhotosAlbum({filePath:this.result,success:function(){t.showToast({title:"二维码保存成功",icon:"success",duration:2e3})}})},_result:function(t){this.result=t,this.$emit("result",t)},_empty:function(t){var i=(0,s.default)(t),e=!1;return"number"==i&&""==String(t)||"undefined"==i?e=!0:"object"==i?"{}"!=JSON.stringify(t)&&"[]"!=JSON.stringify(t)&&null!=t||(e=!0):"string"==i?""!=t&&"undefined"!=t&&"null"!=t&&"{}"!=t&&"[]"!=t||(e=!0):"function"==i&&(e=!1),e}},watch:{size:function(t,i){var e=this;t==i||this._empty(t)||(this.cSize=t,this._empty(this.val)||setTimeout((function(){e._makeCode()}),100))},val:function(t,i){var e=this;this.onval&&(t==i||this._empty(t)||setTimeout((function(){e._makeCode()}),0))}},computed:{cpSize:function(){return"upx"==this.unit?t.upx2px(this.size):this.size}},mounted:function(){var t=this;this.loadMake&&(this._empty(this.val)||setTimeout((function(){t._makeCode()}),0))}};i.default=r}).call(this,e("543d")["default"])},"2c1b":function(t,i,e){"use strict";e.r(i);var n=e("8ff4"),a=e("6e82");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("8d4f");var o=e("f0c5"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=r.exports},"6e82":function(t,i,e){"use strict";e.r(i);var n=e("017b"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},"78ab":function(t,i,e){"use strict";e.r(i);var n=e("1ffc"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},"85cd":function(t,i,e){"use strict";var n=e("e94b"),a=e.n(n);a.a},"8d4f":function(t,i,e){"use strict";var n=e("f6c9"),a=e.n(n);a.a},"8ff4":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this.$createElement,i=(this._self._c,this.$t("提示：点击图片即可保存至手机相册"));this.$mp.data=Object.assign({},{$root:{m0:i}})},a=[]},"92ed":function(t,i,e){"use strict";e.r(i);var n=e("dfc2"),a=e("78ab");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("f763");var o=e("f0c5"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=r.exports},dfc2:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},a=[]},e94b:function(t,i,e){},f09e:function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("7037")),s=(n(e("92ed")),n(e("2c1b"))),o=e("84d8"),r=e("5743"),u=e("2a39"),c=n(e("9159")),l=e("86eb"),d=e("26cb"),g=e("00a0"),f=n(e("19b6")),p=getApp(),h={components:{countDown:function(){e.e("components/countDown/index").then(function(){return resolve(e("80f6"))}.bind(null,e)).catch(e.oe)},authorize:function(){e.e("components/Authorize").then(function(){return resolve(e("ad23"))}.bind(null,e)).catch(e.oe)},home:function(){Promise.all([e.e("common/vendor"),e.e("components/home/index")]).then(function(){return resolve(e("3b71"))}.bind(null,e)).catch(e.oe)},"jyf-parser":function(){Promise.all([e.e("common/vendor"),e.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(e("47fd"))}.bind(null,e)).catch(e.oe)},bargainPoster:s.default},mixins:[f.default],data:function(){return{imgHost:g.HTTP_REQUEST_URL,countDownDay:"00",countDownHour:"00",countDownMinute:"00",countDownSecond:"00",active:!1,id:0,userInfo:{},bargainUid:0,bargainUserInfo:{},bargainUserId:0,bargainInfo:[],userBargainInfo:[],offset:0,limit:20,limitStatus:!1,bargainUserHelpList:[],bargainUserHelpInfo:[],userBargainPrice:0,status:"",peopleCount:[],retunTop:!0,bargainPartake:0,isHelp:!1,interval:null,userBargainStatus:0,bargainSumCount:0,productStock:0,quota:0,userBargainStatusHelp:!0,navH:"",statusPay:"",bargainPrice:0,datatime:0,offest:"",tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%"},H5ShareBox:!1,systemH:100,isAuto:!1,isShowAuth:!1,pages:"",posters:!1,weixinStatus:!1,couponsHidden:!0,followCode:!1,codeShow:!1,cid:"1",ifShow:!0,val:"",size:200,unit:"upx",background:"#FFF",foreground:"#000",pdground:"#000",icon:"",iconsize:40,lv:3,onval:!0,loadMake:!0,src:"",codeSrc:"",picUrl:{},picList:[{popup:"../static/bulet.jpg",barga:"/statics/system_images/bargain_dt_bg_0.jpeg",support:"/statics/system_images/bargain_dt2_bg_0.jpeg",lock:"/statics/system_images/bargain_dt_lock_0.png",lace:"../static/buled.png"},{popup:"../static/greent.jpg",barga:"/statics/system_images/bargain_dt_bg_1.jpeg",support:"/statics/system_images/bargain_dt2_bg_1.jpeg",lock:"/statics/system_images/bargain_dt_lock_1.png",lace:"../static/greend.png"},{popup:"../static/redt.jpg",lace:"../static/redd.png",barga:"/statics/system_images/bargain_dt_bg_2.jpeg",support:"/statics/system_images/bargain_dt2_bg_2.jpeg",lock:"/statics/system_images/bargain_dt_lock_2.png"},{popup:"../static/pinkt.jpg",lace:"../static/pinkd.png",barga:"/statics/system_images/bargain_dt_bg_3.jpeg",support:"/statics/system_images/bargain_dt2_bg_3.jpeg",lock:"/statics/system_images/bargain_dt_lock_3.png"},{popup:"../static/oranget.jpg",lace:"../static/oranged.png",barga:"/statics/system_images/bargain_dt_bg_4.jpeg",support:"/statics/system_images/bargain_dt2_bg_4.jpeg",lock:"/statics/system_images/bargain_dt_lock_4.png"}],bargainPosterModal:!1,posterImageModal:!1,posterImage:""}},computed:(0,d.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,i){t&&(this.getBargainDetails(),this.addShareBargain())},deep:!0},colorStatus:function(t,i){t&&this.colorShow(t)}},onLoad:function(i){var e=this,n=this;this.colorStatus||(0,r.colorChange)("color_change").then((function(t){e.colorShow(t.data.status)})),t.getSystemInfo({success:function(t){n.systemH=t.statusBarHeight,n.navH=n.systemH+10}});var s=getCurrentPages();if(s.length<=1&&(n.retunTop=!1),i.scene){var o=c.default.getUrlParams(decodeURIComponent(i.scene));"object"===(0,a.default)(o)?(o.id&&(i.id=o.id),o.bargain&&(i.bargain=o.bargain),o.pid&&(p.globalData.spid=o.pid)):p.globalData.spid=o}i.spid&&(p.globalData.spid=i.spid),i.hasOwnProperty("id")&&(n.id=i.id,n.bargainUid=i.bargain||0),this.isLogin?("undefined"!=n.bargainUid&&n.bargainUid||(n.bargainUid=n.$store.state.app.uid),this.getBargainDetails(),this.addShareBargain()):(this.$Cache.set("login_back_url","/pages/activity/goods_bargain_details/index?id=".concat(i.id,"&bargain=").concat(this.bargainUid)),(0,l.toLogin)()),t.setNavigationBarTitle({title:this.$t("砍价详情")})},methods:{getPosterImgae:function(t){this.posterImage=t,this.bargainPosterModal=!1,this.posterImageModal=!0},colorShow:function(t){switch(t){case 1:this.picUrl=this.picList[0];break;case 2:this.picUrl=this.picList[1];break;case 3:this.picUrl=this.picList[2];break;case 4:this.picUrl=this.picList[3];break;case 5:this.picUrl=this.picList[4];break;default:this.picUrl=this.picList[2];break}},listenerActionSheet:function(){0==this.isLogin?(0,l.toLogin)():this.posters=!0},shareModal:function(){this.active=!1,this.posters=!0},getBargainUserBargainPricePoster:function(){this.posterImage?(this.bargainPosterModal=!1,this.posterImageModal=!0):(this.bargainPosterModal=!0,this.posters=!1)},listenerActionClose:function(){this.posters=!1,this.posterImageModal=!1},goFriend:function(){this.posters=!1},openTap:function(){this.$set(this,"couponsHidden",!this.couponsHidden)},authColse:function(t){this.isShowAuth=t},goProduct:function(){this.bargainInfo.product_is_show&&t.navigateTo({url:"/pages/goods_details/index?id=".concat(this.bargainInfo.product_id)})},userBargain:function(){if(this.userInfo.uid==this.bargainUid){if(this.userBargainInfo.bargainOrderCount>=this.bargainInfo.num)return this.$util.Tips({title:this.$t("该商品每人限购")+"".concat(this.bargainInfo.num).concat(this.bargainInfo.unit_name)});this.setBargain()}},goBack:function(){t.navigateBack({delta:1})},gobargainUserInfo:function(){var t=this;t.bargainUid;(0,o.postBargainStartUser)({bargainId:t.id,bargainUserUid:t.bargainUid}).then((function(i){t.$set(t,"bargainUserInfo",i.data)}))},goPay:function(){var i=this,e={productId:i.bargainInfo.product_id,bargainId:i.id,cartNum:1,uniqueId:"",combinationId:0,secKillId:0,new:1};(0,u.postCartAdd)(e).then((function(i){t.navigateTo({url:"/pages/goods/order_confirm/index?new=1&cartId="+i.data.cartId})})).catch((function(t){return i.$util.Tips({title:t})}))},getBargainDetails:function(){var i=this,e=i.id;(0,o.getBargainDetail)(e,i.bargainUid).then((function(e){i.bargainInfo=e.data.bargain,i.userBargainInfo=e.data.userBargainInfo,i.bargainPrice=e.data.bargain.price,i.userInfo=e.data.userInfo,i.productStock=e.data.bargain.attr.product_stock,i.quota=e.data.bargain.attr.quota,i.datatime=e.data.bargain.stop_time,i.pages="/pages/activity/goods_bargain_details/index?id="+i.id+"&bargain="+i.bargainUid+"&scene="+i.userInfo.uid,t.setNavigationBarTitle({title:e.data.bargain.title.substring(0,13)+"..."}),i.bargainUserHelpList=[],i.getBargainUser(),i.bargainUid!=i.userInfo.uid&&i.gobargainUserInfo()})).catch((function(t){i.$util.Tips({title:t},{tab:2,url:"/pages/activity/goods_bargain/index"})}))},currentBargainUser:function(){this.$set(this,"bargainUid",this.userInfo.uid),this.setBargain()},setBargain:function(){var t=this;(0,o.postBargainStart)(t.id).then((function(i){t.$set(t,"userBargainPrice",i.data.price),t.$set(t,"active",!0),t.getBargainDetails(),t.userBargainStatus=1}),(function(i){t.$util.Tips({title:i})}))},setBargainHelp:function(){var t=this,i={bargainId:t.id,bargainUserUid:t.bargainUid};(0,o.postBargainHelp)(i).then((function(i){t.$set(t,"userBargainPrice",i.data.price),t.$set(t,"active",!0),t.getBargainDetails()})).catch((function(i){t.$util.Tips({title:i}),t.getBargainDetails()}))},getBargainUser:function(){var t=this,i={bargainId:t.id,bargainUserUid:t.bargainUid,offset:t.offset,limit:t.limit};(0,o.postBargainHelpList)(i).then((function(e){var n=t.bargainUserHelpList,a=e.data.length;n.concat(e.data),t.$set(t,"bargainUserHelpList",e.data),t.$set(t,"limitStatus",i.limit>a),t.$set(t,"offest",Number(i.offset)+Number(i.limit))}))},goBargainList:function(){t.navigateTo({url:"/pages/activity/goods_bargain/index"})},close:function(){this.$set(this,"active",!1)},addShareBargain:function(){var t=this,i=this;(0,o.postBargainShare)(this.id).then((function(e){i.$set(i,"peopleCount",e.data),t.pages="/pages/activity/goods_bargain_details/index?id="+t.id+"&bargain="+t.bargainUid+"&spid="+t.userInfo.uid}))},savePosterPath:function(){var i=this;t.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?t.saveImageToPhotosAlbum({filePath:i.posterImage,success:function(t){i.posterImageClose(),i.$util.Tips({title:i.$t("保存成功"),icon:"success"})},fail:function(t){i.$util.Tips({title:i.$t("保存失败")})}}):t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:i.posterImage,success:function(t){i.posterImageClose(),i.$util.Tips({title:i.$t("保存成功"),icon:"success"})},fail:function(t){i.$util.Tips({title:i.$t("保存失败")})}})}})}})}},onHide:function(){null!==this.interval&&clearInterval(this.interval)},onUnload:function(){null!==this.interval&&clearInterval(this.interval)},onShareAppMessage:function(){var t={title:this.$t("您的好友")+this.userInfo.nickname+this.$t("邀请您砍价")+this.bargainInfo.title+this.$t("go_help"),path:"/pages/activity/goods_bargain_details/index?id="+this.id+"&bargain="+this.bargainUid+"&spid="+this.userInfo.uid,imageUrl:this.bargainInfo.image};return this.close(),this.addShareBargain(),t}};i.default=h}).call(this,e("543d")["default"])},f6c9:function(t,i,e){},f763:function(t,i,e){"use strict";var n=e("f76f"),a=e.n(n);a.a},f76f:function(t,i,e){}},[["0ae7","common/runtime","common/vendor"]]]);