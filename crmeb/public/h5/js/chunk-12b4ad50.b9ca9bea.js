(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12b4ad50"],{"79dd":function(t,e,s){"use strict";var o=s("dd87"),a=s.n(o);a.a},dd87:function(t,e,s){},fcd5:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"container",staticClass:"storeBox"},[t._l(t.storeList,function(e,o){return s("div",{key:o,staticClass:"storeBox-box",on:{click:function(s){return s.stopPropagation(),t.checked(e)}}},[s("div",{staticClass:"store-img"},[s("img",{attrs:{src:e.image,"lazy-load":"true"}})]),s("div",{staticClass:"store-cent-left"},[s("div",{staticClass:"store-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"store-address line1"},[t._v("\n          "+t._s(e.address)+t._s(", "+e.detailed_address)+"\n        ")])]),s("div",{staticClass:"row-right"},[s("div",[s("a",{staticClass:"store-phone",attrs:{href:"tel:"+e.phone}},[s("span",{staticClass:"iconfont icon-dadianhua01"})])]),s("div",{staticClass:"store-distance",on:{click:function(s){return s.stopPropagation(),t.showMaoLocation(e)}}},[e.range?s("span",{staticClass:"addressTxt"},[t._v("距离"+t._s(e.range)+"千米")]):s("span",{staticClass:"addressTxt"},[t._v("查看地图")]),s("span",{staticClass:"iconfont icon-youjian"})])])])}),s("Loading",{attrs:{loaded:t.loaded,loading:t.loading}})],2),s("div",[t.locationShow&&!t.isWeixin?s("iframe",{ref:"geoPage",staticStyle:{display:"none"},attrs:{width:"0",height:"0",frameborder:"0",scrolling:"no",src:"https://apis.map.qq.com/tools/geolocation?key="+t.mapKey+"&referer=myapp"}}):t._e()]),t.mapShow?s("div",{staticClass:"geoPage"},[s("iframe",{attrs:{width:"100%",height:"100%",frameborder:"0",scrolling:"no",src:"https://apis.map.qq.com/uri/v1/geocoder?coord="+t.system_store.latitude+","+t.system_store.longitude+"&referer="+t.mapKey}})]):t._e()])},a=[],i=(s("7f7f"),s("3a5e")),n=s("73f5"),r=s("ed08"),d=s("74f9"),c=s("2f62"),l=s("d0a4"),g="user_longitude",h="user_latitude",u="mapKey",m={name:"storeList",components:{Loading:i["a"]},computed:Object(c["b"])(["goName"]),data:function(){return{page:1,limit:20,loaded:!1,loading:!1,storeList:[],mapShow:!1,system_store:{},mapKey:l["a"].get(u),locationShow:!1}},mounted:function(){var t=this;l["a"].get(g)&&l["a"].get(h)?this.getList():this.selfLocation(),this.$scroll(this.$refs.container,function(){!t.loading&&t.getList()})},methods:{selfLocation:function(){var t=this;if(Object(r["d"])())Object(d["wxShowLocation"])().then(function(e){console.log(e),t.getList()}).catch(function(e){t.$dialog.error(e.msg),t.getList()});else{if(!l["a"].get(u))return this.$dialog.error("暂无法使用查看地图，请配置您的腾讯地图key");var e,s=this;l["a"].get(u)&&(s.locationShow=!0),window.addEventListener("message",function(t){e=t.data,console.log("location",e),e&&"geolocation"==e.module?(l["a"].set(h,e.lat),l["a"].set(g,e.lng),s.getList()):(l["a"].remove(h),l["a"].remove(g),s.getList(),console.log("定位失败"))},!1)}},showMaoLocation:function(t){if(this.system_store=t,Object(r["d"])()){var e={latitude:parseFloat(this.system_store.latitude),longitude:parseFloat(this.system_store.longitude),name:this.system_store.name,address:this.system_store.address+this.system_store.detailed_address};Object(d["wechatEvevt"])("openLocation",e).then(function(t){console.log(t)}).catch(function(t){t.is_ready&&t.wx.openLocation(e)})}else{if(!l["a"].get(u))return this.$dialog.error("暂无法使用查看地图，请配置您的腾讯地图key");this.mapShow=!0}},checked:function(t){"orders"===this.goName&&(this.$store.commit("GET_STORE",t),this.$router.go(-1))},getList:function(){var t=this;if(!this.loading&&!this.loaded){this.loading=!0;var e={latitude:l["a"].get(h)||"",longitude:l["a"].get(g)||"",page:this.page,limit:this.limit};Object(n["q"])(e).then(function(e){t.loading=!1,t.loaded=e.data.list.length<t.limit,t.storeList.push.apply(t.storeList,e.data.list),t.page=t.page+1}).catch(function(e){t.$dialog.error(e.msg)})}}}},f=m,p=(s("79dd"),s("2877")),v=Object(p["a"])(f,o,a,!1,null,"3e2c9467",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-12b4ad50.b9ca9bea.js.map