(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-93d047c8"],{"0d77":function(e,t,a){"use strict";a("7031")},"669a":function(e,t,a){"use strict";a.r(t),a("b0c0");var r=a("5530"),n=(a("a434"),a("2f62")),o=a("90e7"),i=a("c7eb"),s=a("1da1"),l=(a("d9e2"),a("d81d"),a("b0e7")),c=a("b562"),d=(l={name:"systemStore",components:{uploadPictures:l.a},props:{},data:function(){var e=this;return{isTemplate:!1,spinShow:!1,modalMap:!1,addresData:[],modalTitle:"",formItem:{name:"",introduction:"",phone:"",address:[],address2:[],detailed_address:"",valid_time:[],day_time:["",""],latlng:"",id:0},ruleValidate:{name:[{required:!0,message:"请输入提货点名称",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],address:[{required:!0,message:"请选择提货点地址",type:"array",trigger:"change"}],valid_time:[{required:!0,type:"array",message:"请选择核销时效",trigger:"change",fields:{0:{type:"date",required:!0,message:"请选择年度范围"},1:{type:"date",required:!0,message:"请选择年度范围"}}}],day_time:[{required:!0,type:"array",message:"请选择提货点营业时间",trigger:"change"}],phone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("请填写电话号码"));a()},trigger:"blur"}],detailed_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],image:[{required:!0,validator:function(t,a,r){e.formItem.image?r():r(new Error("请上传提货点logo"))},trigger:"change"}],oblong_image:[{required:!0,validator:function(t,a,r){e.formItem.oblong_image?r():r(new Error("请上传提货点大图"))},trigger:"change"}],latlng:[{required:!0,message:"请选择经纬度",trigger:"blur"}]},keyUrl:"",grid:{xl:20,lg:24,md:20,sm:24,xs:24},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},modalPic:!1,isChoice:"单选"}},created:function(){this.getCityList()},computed:{},mounted:function(){window.addEventListener("message",(function(e){e=e.data,e&&"locationPicker"===e.module&&window.parent.selectAdderss(e)}),!1),window.selectAdderss=this.selectAdderss},methods:{getCityList:function(){var e=this;Object(c.b)().then((function(t){t.data.map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label}))}))})),e.addresData=t.data}))},cancel:function(){this.$refs.formItem.resetFields(),this.clearFrom()},clearFrom:function(){this.formItem.introduction="",this.formItem.day_time=["",""],this.formItem.oblong_image="",this.formItem.id=0},selectAdderss:function(e){this.formItem.latlng=e.latlng.lat+","+e.latlng.lng,this.modalMap=!1},getKey:function(){},getInfo:function(e){var t=this;t.formItem.id=e,t.spinShow=!0,Object(o.Hb)(e).then((function(e){e=e.data.info||null,t.formItem=e||t.formItem,t.formItem.address=e.address2,t.formItem.day_time=e.day_time.split("-"),t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$message.error(e.msg)}))},modalPicTap:function(e,t){this.modalTitle="oblong"==t?"提货点大图":"提货点LOGO",this.modalPic=!0,this.picTit=t},getPic:function(e){switch(this.picTit){case"logo":this.formItem.image=e.att_dir;break;case"oblong":this.formItem.oblong_image=e.att_dir}this.modalPic=!1},handleChange:function(e,t){this.formItem.address=t.map((function(e){return e.label}))},onchangeDate:function(e){this.formItem.valid_time=e},onchangeTime:function(e){this.formItem.day_time=e},onSearch:function(){var e=this;this.keyUrl?this.modalMap=!0:Object(o.I)().then(function(){var t=Object(s.a)(Object(i.a)().mark((function t(a){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.data.key,e.keyUrl="https://apis.map.qq.com/tools/locpicker?type=1&key=".concat(r,"&referer=myapp"),e.modalMap=!0;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.msg)}))},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;Object(o.Eb)(t.formItem).then(function(){var a=Object(s.a)(Object(i.a)().mark((function a(r){return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$message.success(r.msg),t.isTemplate=!1,t.$parent.getList(),t.$refs[e].resetFields(),t.clearFrom();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))}))}}},a("0d77"),a("2877"));l={name:"setting_store",components:{systemStore:Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{visible:e.isTemplate,title:e.formItem.id?"编辑提货点":"添加提货点",width:"720px","append-to-body":""},on:{"update:visible":function(t){e.isTemplate=t},closed:e.cancel}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.spinShow,expression:"spinShow"}],staticClass:"article-manager"},[t("el-form",{ref:"formItem",attrs:{model:e.formItem,"label-width":"110px","label-position":"right",rules:e.ruleValidate},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点名称：",prop:"name","label-for":"name"}},[t("el-input",{attrs:{placeholder:"请输入提货点名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点简介：","label-for":"introduction"}},[t("el-input",{attrs:{placeholder:"请输入提货点简介"},model:{value:e.formItem.introduction,callback:function(t){e.$set(e.formItem,"introduction",t)},expression:"formItem.introduction"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点电话：","label-for":"phone",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入提货点电话："},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点地址：","label-for":"address",prop:"address"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.addresData},on:{change:e.handleChange},model:{value:e.formItem.address,callback:function(t){e.$set(e.formItem,"address",t)},expression:"formItem.address"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"详细地址：","label-for":"detailed_address",prop:"detailed_address"}},[t("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.formItem.detailed_address,callback:function(t){e.$set(e.formItem,"detailed_address",t)},expression:"formItem.detailed_address"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点营业：","label-for":"day_time",prop:"day_time"}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{"is-range":"",format:"HH:mm:ss","value-format":"HH:mm:ss","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:e.onchangeTime},model:{value:e.formItem.day_time,callback:function(t){e.$set(e.formItem,"day_time",t)},expression:"formItem.day_time"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点logo：",prop:"image"}},[t("div",{staticClass:"picBox",on:{click:function(t){return e.modalPicTap("单选","logo")}}},[e.formItem.image?t("div",{staticClass:"pictrue"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formItem.image,expression:"formItem.image"}]})]):t("div",{staticClass:"upLoad acea-row row-center-wrapper"},[t("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])])],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"提货点大图：",prop:"oblong_image"}},[t("div",{staticClass:"picBox",on:{click:function(t){return e.modalPicTap("单选","oblong")}}},[e.formItem.oblong_image?t("div",{staticClass:"pictrue"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formItem.oblong_image,expression:"formItem.oblong_image"}]})]):t("div",{staticClass:"upLoad acea-row row-center-wrapper"},[t("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])])],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"经纬度：","label-for":"status2",prop:"latlng"}},[t("el-tooltip",[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请查找位置"},model:{value:e.formItem.latlng,callback:function(t){e.$set(e.formItem,"latlng",t)},expression:"formItem.latlng"}},[t("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.onSearch},slot:"append"},[e._v("查找位置")])],1),t("div",{attrs:{slot:"content"},slot:"content"},[e._v("请点击查找位置选择位置")])],1)],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.modalPic,width:"1024px",title:e.modalTitle,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.modalPic=t}}},[e.modalPic?t("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic}}):e._e()],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",long:""},on:{click:function(t){return e.handleSubmit("formItem")}}},[e._v(e._s(e.formItem.id?"修改":"提交"))])],1)]),t("el-dialog",{staticClass:"mapBox",attrs:{visible:e.modalMap,title:"请选择地址","append-to-body":"","close-on-click-modal":!1,width:"720px"},on:{"update:visible":function(t){e.modalMap=t}}},[t("iframe",{attrs:{id:"mapPage",width:"100%",height:"600px",frameborder:"0",src:e.keyUrl}})])],1)}),[],!1,null,"7401c5af",null).exports},computed:Object(r.a)(Object(r.a)(Object(r.a)({},Object(n.d)("media",["isMobile"])),Object(n.d)("userLevel",["categoryId"])),{},{labelWidth:function(){return this.isMobile?void 0:"90px"},labelPosition:function(){return this.isMobile?"top":"right"}}),data:function(){return{grid:{xl:10,lg:10,md:12,sm:24,xs:24},headeNum:{show:{name:"",num:0},hide:{name:"",num:0},recycle:{name:"",num:0}},artFrom:{page:1,limit:15,type:"0",keywords:""},loading:!1,storeLists:[],total:0}},mounted:function(){this.storeHeade(),this.getList()},methods:{storeHeade:function(){var e=this,t=this;Object(o.Gb)().then((function(e){t.headeNum=e.data.count})).catch((function(t){e.$message.error(t.msg)}))},getList:function(){var e=this,t=this;t.loading=!0,Object(o.V)(t.artFrom).then((function(e){t.loading=!1,t.storeLists=e.data.list,t.total=e.data.count})).catch((function(t){e.$message.error(t.msg)}))},userSearchs:function(){this.artFrom.page=1,this.getList()},onClickTab:function(){this.artFrom.page=1,this.artFrom.keywords="",this.getList()},del:function(e,t,a){var r=this;t={title:t,num:a,url:"merchant/store/del/".concat(e.id),method:"DELETE",ids:""};this.$modalSure(t).then((function(e){r.$message.success(e.msg),r.storeLists.splice(a,1),r.storeHeade()})).catch((function(e){r.$message.error(e.msg)}))},add:function(){this.$refs.template.isTemplate=!0},onchangeIsShow:function(e,t){var a=this;Object(o.Ib)(e,t).then((function(e){a.$message.success(e.msg),a.getList(),a.storeHeade()}))},edit:function(e){this.$refs.template.isTemplate=!0,this.$refs.template.getInfo(e)}}},a("fcea"),r=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"ivu-mb-16",attrs:{bordered:!1,shadow:"never","body-style":{padding:0}}},[t("div",{staticClass:"padding-add"},[t("el-form",{ref:"artFrom",attrs:{model:e.artFrom,"label-width":e.labelWidth,"label-position":e.labelPosition,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"提货点搜索："}},[t("el-input",{staticClass:"form_content_width",attrs:{clearable:"",placeholder:"请输入提货点名称,电话"},model:{value:e.artFrom.keywords,callback:function(t){e.$set(e.artFrom,"keywords",t)},expression:"artFrom.keywords"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.userSearchs}},[e._v("查询")])],1)],1)],1)]),t("el-card",{staticClass:"ivu-mt",attrs:{bordered:!1,shadow:"never","body-style":{padding:"0 20px 20px"}}},[e.headeNum.show.name?t("div",[t("el-tabs",{on:{"tab-click":e.onClickTab},model:{value:e.artFrom.type,callback:function(t){e.$set(e.artFrom,"type",t)},expression:"artFrom.type"}},[t("el-tab-pane",{attrs:{label:e.headeNum.show.name+"("+e.headeNum.show.num+")",name:"0"}}),t("el-tab-pane",{attrs:{label:e.headeNum.hide.name+"("+e.headeNum.hide.num+")",name:"1"}}),t("el-tab-pane",{attrs:{label:e.headeNum.recycle.name+"("+e.headeNum.recycle.num+")",name:"2"}})],1)],1):e._e(),t("el-row",{directives:[{name:"auth",rawName:"v-auth",value:["setting-merchant-system_store-save"],expression:"['setting-merchant-system_store-save']"}]},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["setting-merchant-system_store-save"],expression:"['setting-merchant-system_store-save']"}],attrs:{type:"primary"},on:{click:e.add}},[e._v("添加提货点")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"mt14",attrs:{data:e.storeLists,"highlight-current-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"}},[t("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.id))])]}}])}),t("el-table-column",{attrs:{label:"提货点图片","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.image,expression:"scope.row.image"}]})])]}}])}),t("el-table-column",{attrs:{label:"提货点名称","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{label:"提货点电话","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.phone))])]}}])}),t("el-table-column",{attrs:{label:"地址","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.detailed_address))])]}}])}),t("el-table-column",{attrs:{label:"营业时间","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.day_time))])]}}])}),t("el-table-column",{attrs:{label:"是否显示","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{staticClass:"defineSwitch",attrs:{"active-value":1,"inactive-value":0,value:a.row.is_show,size:"large","active-text":"显示","inactive-text":"隐藏"},on:{change:function(t){return e.onchangeIsShow(a.row.id,a.row.is_show)}},model:{value:a.row.is_show,callback:function(t){e.$set(a.row,"is_show",t)},expression:"scope.row.is_show"}})]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"170"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{on:{click:function(t){return e.edit(a.row.id)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),0==a.row.is_del?t("a",{on:{click:function(t){return e.del(a.row,"删除提货点",a.$index)}}},[e._v("删除")]):t("a",{on:{click:function(t){return e.del(a.row,"恢复提货点",e.index)}}},[e._v("恢复")])]}}])})],1),t("div",{staticClass:"acea-row row-right page"},[e.total?t("pagination",{attrs:{total:e.total,page:e.artFrom.page,limit:e.artFrom.limit},on:{"update:page":function(t){return e.$set(e.artFrom,"page",t)},"update:limit":function(t){return e.$set(e.artFrom,"limit",t)},pagination:e.getList}}):e._e()],1)],1),t("system-store",{ref:"template"})],1)}),[],!1,null,"192323eb",null);t.default=r.exports},7031:function(e,t,a){},aadb:function(e,t,a){},b562:function(e,t,a){"use strict";a.d(t,"n",(function(){return n})),a.d(t,"w",(function(){return o})),a.d(t,"s",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"i",(function(){return l})),a.d(t,"j",(function(){return c})),a.d(t,"k",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"t",(function(){return f})),a.d(t,"v",(function(){return h})),a.d(t,"u",(function(){return g})),a.d(t,"z",(function(){return b})),a.d(t,"x",(function(){return w})),a.d(t,"y",(function(){return v})),a.d(t,"r",(function(){return y})),a.d(t,"p",(function(){return _})),a.d(t,"q",(function(){return I})),a.d(t,"o",(function(){return k})),a.d(t,"c",(function(){return x})),a.d(t,"b",(function(){return O})),a.d(t,"e",(function(){return j})),a.d(t,"d",(function(){return S})),a.d(t,"m",(function(){return T})),a.d(t,"l",(function(){return $})),a("99af");var r=a("6b6c");function n(){return Object(r.a)({url:"app/routine/syncSubscribe",method:"GET"})}function o(){return Object(r.a)({url:"app/wechat/syncSubscribe",method:"GET"})}function i(e){return Object(r.a)({url:"app/wechat/menu",method:"get"})}function s(e){return Object(r.a)({url:"app/wechat/menu",method:"post",data:e})}function l(e){return Object(r.a)({url:e.url,method:"post",data:e.key})}function c(e){return Object(r.a)({url:"app/routine/download",method:"post",data:e})}function d(){return Object(r.a)({url:"app/routine/info",method:"get"})}function u(e){return Object(r.a)({url:"app/wechat/keyword",method:"get",params:e})}function m(e){return Object(r.a)({url:"app/wechat/keyword/set_status/".concat(e.id,"/").concat(e.status),method:"PUT"})}function p(e,t){return Object(r.a)({url:e,method:"get",params:t.key})}function f(e){return Object(r.a)({url:"/app/wechat/news",method:"POST",data:e})}function h(e){return Object(r.a)({url:"app/wechat/news",method:"GET",params:e})}function g(e){return Object(r.a)({url:"app/wechat/news/".concat(e),method:"GET"})}function b(){return Object(r.a)({url:"app/wechat/tag",method:"GET"})}function w(){return Object(r.a)({url:"app/wechat/tag/create",method:"GET"})}function v(e){return Object(r.a)({url:"app/wechat/tag/".concat(e,"/edit"),method:"GET"})}function y(){return Object(r.a)({url:"app/wechat/group",method:"GET"})}function _(){return Object(r.a)({url:"app/wechat/group/create",method:"GET"})}function I(e){return Object(r.a)({url:"app/wechat/group/".concat(e,"/edit"),method:"GET"})}function k(e){return Object(r.a)({url:"app/wechat/action",method:"GET",params:e})}function x(e){return Object(r.a)({url:"app/wechat/code_reply/".concat(e),method:"GET"})}function O(){return Object(r.a)({url:"setting/city/full_list",method:"GET"})}function j(e){return Object(r.a)({url:"app/kefu/auto_reply/list",method:"get",params:e})}function S(e){return Object(r.a)({url:"app/kefu/auto_reply/form/"+e,method:"get"})}function T(e){return Object(r.a)({url:"app/routine/scheme_list",method:"get",params:e})}function $(e){return Object(r.a)({url:"app/routine/scheme_form/".concat(e),method:"get"})}},fcea:function(e,t,a){"use strict";a("aadb")}}]);